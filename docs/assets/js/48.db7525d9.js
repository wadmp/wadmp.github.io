(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{491:function(t,s,a){"use strict";a.r(s);var n=a(11),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"useful-examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useful-examples"}},[t._v("#")]),t._v(" Useful Examples")]),t._v(" "),s("p",[t._v("This page provides examples and further context for endpoints that are more difficult to navigate.")]),t._v(" "),s("p",[t._v("All the examples bellow expect that authentication token has already been obtained. Please see "),s("RouterLink",{attrs:{to:"/gen3/api/authentication/"}},[t._v("Authentication")]),t._v(" for detailed explanation of how to obtain it.")],1),t._v(" "),s("h2",{attrs:{id:"device-monitoring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#device-monitoring"}},[t._v("#")]),t._v(" Device Monitoring")]),t._v(" "),s("p",[t._v("The following examples are relevant for obtaining information about devices in your company.")]),t._v(" "),s("h3",{attrs:{id:"example-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-1"}},[t._v("#")]),t._v(" Example 1")]),t._v(" "),s("p",[s("strong",[t._v("Goal")]),t._v(": Get the names and descriptions of devices that are currently offline."),s("br"),t._v(" "),s("strong",[t._v("Endpoint Section")]),t._v(": "),s("em",[t._v("DeviceMonitoring")]),s("br"),t._v(" "),s("strong",[t._v("Endpoint")]),t._v(": "),s("code",[t._v("/monitoring/devices/companies/<CompanyId>")]),s("br"),t._v(" "),s("strong",[t._v("Request")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://gateway.wadmp3.com/api/monitoring/devices/companies/<INSERT_COMPANY_ID>'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accept: application/json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization: Bearer <INSERT_YOUR_ACCESS_TOKEN_HERE>'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json-patch+json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{\n  "page": 1,\n  "page_size": 10,\n  "filters": [\n    {\n      "rule": {\n        "operator_id": "Equals",\n        "operands": [\n          0\n        ]\n      },\n      "field_name": "Online"\n    }\n  ],\n  "fields": [\n    {\n      "name": "Name"\n    },\n    {\n      "name": "Description"\n    }   \n  ]\n}\'')]),t._v(" \n")])])]),s("p",[s("strong",[t._v("Comments")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("A list of all valid values for "),s("code",[t._v("field_name")]),t._v(" property can be obtained via a "),s("code",[t._v("GET /fields")]),t._v(" endpoint.")]),t._v(" "),s("li",[t._v("Some fields have a property "),s("code",[t._v("has_options=true")]),t._v(". For such fields there is a predefined list of possible values that can be set. "),s("code",[t._v("Online")]),t._v(" field is one of those. If you want to learn what values are possible for such field, you can call "),s("code",[t._v("GET /fields/input-options")]),t._v(" endpoint. For this particular field it would return:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Offline"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(",\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Online"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" -1,\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Never Connected"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("ul",[s("li",[t._v("To obtain a list of possible values for "),s("code",[t._v("operator_id")]),t._v(" property, you can use endpoint "),s("code",[t._v("GET /fields/operators-for-types")]),t._v(".")])]),t._v(" "),s("h3",{attrs:{id:"example-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[t._v("#")]),t._v(" Example 2")]),t._v(" "),s("p",[s("strong",[t._v("Goal")]),t._v(": Get the highest CPU usage & the MAC of the router with the highest CPU usage among routers whose tag Country has value “Germany”."),s("br"),t._v(" "),s("strong",[t._v("Endpoint Section")]),t._v(": "),s("em",[t._v("CompanyStatistics")]),s("br"),t._v(" "),s("strong",[t._v("Endpoint")]),t._v(": "),s("code",[t._v("/monitoring/companies/<CompanyId>/sources")]),s("br"),t._v(" "),s("strong",[t._v("Request")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://gateway.dev.wadmp.com/api/monitoring/companies/<INSERT_COMPANY_ID>/sources'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accept: application/json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization: Bearer <INSERT_YOUR_ACCESS_TOKEN_HERE>\n  -H '")]),t._v("Content-Type: application/json-patch+json"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' \\\n  -d '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filters"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rule"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"operator_id"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Equals"')]),t._v(",\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"operands"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Germany"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"field_name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Country"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sources"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("INSERT_MAX_CPU_SOURCE_ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("INSERT_TOP_CPU_DEVICE_SOURCE_ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("'\n")])])]),s("p",[s("strong",[t._v("Comments")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("Before you call this endpoint, you need to find the ID of the appropriate Sources. You can use GET /sources endpoint to get a list of all Sources available to your company. In this case you need to look for Sources with the following properties:\n"),s("ul",[s("li",[s("code",[t._v('"source_type": "FieldAggregation", "aggregation_type": "Max", "field_id": <INSERT_CPU_FIELD_ID>')])]),t._v(" "),s("li",[s("code",[t._v('"source_type": "FieldAggregation", "aggregation_type": "TopDevice", "field_id": <INSERT_CPU_FIELD_ID>')])])])]),t._v(" "),s("li",[s("strong",[t._v("Sources Explanation")]),t._v(":\n"),s("ul",[s("li",[t._v("Whenever a new field is added to a company, the system automaticly creates new Sources for it. Each such Source represents a different type of information, which can be queried.")]),t._v(" "),s("li",[t._v("Not all sources are associated with fields (e.g. Source named "),s("code",[t._v('"Users Count"')]),t._v(").")])])])]),t._v(" "),s("h3",{attrs:{id:"example-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-3"}},[t._v("#")]),t._v(" Example 3")]),t._v(" "),s("p",[s("strong",[t._v("Goal")]),t._v(": Get the connection history of a device.\n"),s("strong",[t._v("Endpoint Section")]),t._v(": "),s("em",[t._v("DeviceMonitoring")]),t._v(" "),s("strong",[t._v("Endpoint")]),t._v(": "),s("code",[t._v("/monitoring/devices/<MAC>/history")]),t._v(" "),s("strong",[t._v("Request")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://gateway.dev.wadmp.com/api/monitoring/devices/<INSERT_MAC_ADDRESS>/history'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accept: application/json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization: Bearer <INSERT_YOUR_ACCESS_TOKEN_HERE>\n  -H '")]),t._v("Content-Type: application/json-patch+json"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' \\\n  -d '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fields"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Online"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2025-03-18T12:21:05.684Z"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stop"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2025-06-19T12:21:05.684Z"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("'\n")])])]),s("p",[s("strong",[t._v("Comments")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("You can also use the optional "),s("code",[t._v("sampling_period")]),t._v(" and "),s("code",[t._v("sampling_operator")]),t._v(" parameters to reduce the amount of data returned by the endpoint. However, those are not very useful for the connection history, so they are not used in this example.")])]),t._v(" "),s("h2",{attrs:{id:"device-management"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#device-management"}},[t._v("#")]),t._v(" Device Management")]),t._v(" "),s("p",[t._v("The following examples are relevant for applying changes to your devices.")]),t._v(" "),s("h3",{attrs:{id:"example-1-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-1-2"}},[t._v("#")]),t._v(" Example 1")]),t._v(" "),s("p",[s("strong",[t._v("Goal")]),t._v(": Update the value of tag “IsWarm” to True for all routers whose Temperature > 30 °C."),s("br"),t._v(" "),s("strong",[t._v("Endpoint Section")]),t._v(": "),s("em",[t._v("DeviceManagement")]),s("br"),t._v(" "),s("strong",[t._v("Endpoint")]),t._v(": "),s("code",[t._v("/management/devices/long-operations/fields")]),s("br"),t._v(" "),s("strong",[t._v("Request")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://gateway.dev.wadmp.com/api/management/devices/long-operations/fields'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accept: application/json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization: Bearer <INSERT_YOUR_ACCESS_TOKEN_HERE>\n  -H '")]),t._v("Content-Type: application/json-patch+json"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' \\\n  -d '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"company_id"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("INSERT_COMPANY_ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"field_name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IsWarm"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" true,\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filters"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rule"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"operator_id"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GreaterThan"')]),t._v(",\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"operands"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"field_name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Temperature"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("'\n")])])]),s("p",[s("strong",[t._v("Comments")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("Update is executed asynchronously. This endpoint returns code 202 (Accepted) and the ID of the operation, whose status can then be queried via "),s("code",[t._v("/long-operations/<OperationId>")]),t._v(" endpoint.")])])])}),[],!1,null,null,null);s.default=e.exports}}]);